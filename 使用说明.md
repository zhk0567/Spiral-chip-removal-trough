# 螺旋排屑槽设计工具使用说明

## 工具简介

这是一个独立的螺旋排屑槽设计工具，基于对图源刀具绘图系统V3.16的逆向分析结果实现。工具可以计算螺旋排屑槽的几何参数并生成用于CAD绘图的坐标数据。

## 功能特点

- ✅ **纯数学计算**：基于螺旋线展开理论，不依赖任何外部库
- ✅ **参数化设计**：支持自定义螺旋角、直径、长度等参数
- ✅ **多数据输出**：生成中心线、边界线、刀具轮廓三种数据
- ✅ **CSV格式输出**：可直接导入Excel、AutoCAD等软件
- ✅ **实时可视化**：自动生成高清图形，实时预览设计结果
- ✅ **本地运行**：Python脚本，无需编译安装

## 系统要求

- Python 3.6+
- matplotlib (绘图库) - 安装命令：`pip install matplotlib`
- 无其他依赖库

## 使用方法

### 1. 运行程序

```bash
python spiral_groove_designer.py
```

程序运行后会：
- 在控制台显示计算过程和结果
- **自动弹出图形窗口**显示设计结果
- 生成CSV数据文件和PNG图像文件

### 4. 运行示例脚本（可选）

```bash
python example_designs.py
```

查看不同设计参数的效果对比，包括：
- 不同类型钻头的设计对比
- 螺旋角对排屑槽形状的影响研究

### 2. 查看图形结果

程序会自动显示包含两个子图的图形窗口：
- **左侧展开图**：显示螺旋槽的完整几何形状
- **右侧3D效果图**：模拟螺旋线的空间形态
- **参数信息**：在图形底部显示所有设计参数和计算结果

### 3. 参数设置

在脚本中修改以下参数：

```python
spiral_angle = 30.0    # 螺旋角（度），范围：0°-90°
drill_diameter = 10.0  # 钻头直径（mm）
total_length = 50.0    # 钻头总长（mm）
blade_width = 2.0      # 刀瓣宽度（mm）
blade_height = 1.0     # 刀瓣高度（mm）
```

### 3. 查看结果

程序运行后会生成三个CSV文件：

- `spiral_center.csv` - 螺旋槽中心线坐标
- `spiral_boundaries.csv` - 排屑槽左右边界坐标
- `tool_outline.csv` - 刀具外轮廓坐标

## 输出文件格式

### spiral_groove_plot.png (新增)
**高清设计图形**，包含：
- 左侧：螺旋排屑槽展开图，显示中心线、边界线和刀具轮廓
- 右侧：3D效果模拟图，展示螺旋线的空间形态
- 底部：完整的设计参数和计算结果

### design_comparison.png (示例)
**不同类型钻头对比图**，展示三种典型设计的差异

### angle_study.png (研究)
**螺旋角参数研究图**，展示不同螺旋角对排屑槽形状的影响

### spiral_center.csv
```
X,Y
0.000000,0.000000
0.555556,0.320750
1.111111,0.641500
...
```

### spiral_boundaries.csv
```
X,Y_Left,Y_Right
0.000000,1.000000,-1.000000
0.555556,1.320750,-0.679250
1.111111,1.641500,-0.358500
...
```

### tool_outline.csv
```
X,Y
0.000000,0.000000
50.000000,0.000000
50.000000,31.415927
0.000000,31.415927
0.000000,0.000000
```

## 在CAD软件中使用

### Excel/LibreOffice
1. 打开生成的CSV文件
2. 使用散点图或线图绘制数据
3. 观察螺旋线的形状

### AutoCAD
1. 使用`PLINE`命令绘制多段线
2. 输入CSV文件中的坐标点
3. 连接各点形成曲线

### SolidWorks
1. 创建2D草图
2. 导入CSV数据作为曲线
3. 使用样条曲线工具拟合

## 数学原理

### 螺旋线展开
- **螺距计算**：`pitch = circumference / tan(螺旋角)`
- **圆周长度**：`circumference = 2 * π * radius`
- **展开坐标**：`y = (x / pitch) * circumference`

### 边界计算
- **左边界**：`y_left = y_center + bladeWidth/2`
- **右边界**：`y_right = y_center - bladeWidth/2`

### 刀具轮廓
- **宽度**：等于钻头总长
- **高度**：等于圆周长度

## 参数说明

| 参数 | 说明 | 单位 | 范围 |
|------|------|------|------|
| spiral_angle | 螺旋角 | 度 | 0° < angle < 90° |
| drill_diameter | 钻头直径 | mm | > 0 |
| total_length | 钻头总长 | mm | > 0 |
| blade_width | 刀瓣宽度 | mm | > 0 |
| blade_height | 刀瓣高度 | mm | > 0 |

## 示例参数

### 示例1：标准麻花钻
```python
spiral_angle = 30.0
drill_diameter = 10.0
total_length = 50.0
blade_width = 2.0
blade_height = 1.0
```

### 示例2：浅角度钻头
```python
spiral_angle = 15.0
drill_diameter = 8.0
total_length = 40.0
blade_width = 1.5
blade_height = 0.8
```

### 示例3：深孔钻头
```python
spiral_angle = 45.0
drill_diameter = 12.0
total_length = 100.0
blade_width = 3.0
blade_height = 1.5
```

## 故障排除

### 程序无法运行
- 确保Python版本 >= 3.6
- 检查文件路径是否正确

### 参数验证失败
- 检查螺旋角是否在0°-90°范围内
- 确保所有长度参数大于0

### CSV文件为空
- 检查参数设置是否正确
- 查看控制台错误信息

### CAD导入问题
- 确认坐标系设置
- 检查单位转换（mm vs 英寸）

### 图形显示问题
- 确认已安装matplotlib：`pip install matplotlib`
- 如果图形窗口不显示，检查Python环境变量
- 在某些系统中可能需要设置显示后端

## 技术支持

如有问题，请检查：
1. 参数设置是否符合要求
2. Python环境是否正常
3. CSV文件是否正确生成

## 版本信息

- 版本：1.0
- 基于：图源刀具绘图系统V3.16逆向分析
- 语言：Python 3
- 作者：AI Assistant
